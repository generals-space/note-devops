# åˆ›å»ºåå°å®ˆæŠ¤è¿›ç¨‹.1.[nohup setsid]

å‚è€ƒæ–‡ç« 

1. [linuxåå°ç¨‹åºè¿è¡Œè„šæœ¬(setsid)](https://www.jianshu.com/p/ab4b457e820e)
    - æ³¨æ„: `nohup`ç¤ºä¾‹ä¸­æ²¡æœ‰æ·»åŠ `&`ç¬¦å·
2. [Linuxå‘½ä»¤ä¹‹nohup/setsid/&](https://zhuanlan.zhihu.com/p/53212013)

å‚è€ƒæ–‡ç« 1ä¸­æ‰€è¯´çš„`nohup`åœ¨sshæ–­è¿åè¿›ç¨‹æŒ‚æ‰çš„é—®é¢˜æˆ‘æ²¡èƒ½å¤ç°, å·¥ä½œå¾—è¿˜æŒºæ­£å¸¸çš„.

åœ¨ç»ˆç«¯1ä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤

```
nohup ping www.baidu.com &
```

åœ¨ç»ˆç«¯2ä¸­æŸ¥çœ‹

```console
$ ps -ef | grep ping
root      94966  82068  0 22:08 pts/5    00:00:00 ping www.baidu.com
root      95019  94989  0 22:09 pts/6    00:00:00 grep --color=auto www
```

å°†ç»ˆç«¯1å…³æ‰, `ping`å‘½ä»¤å¹¶ä¸ä¼šç»“æŸ, è€Œæ˜¯ä¼šç”±1å·è¿›ç¨‹æ¥ç®¡

```console
$ ps -ef | grep ping
root      94966      1  0 22:08 ?        00:00:00 ping www.baidu.com
root      95106  94989  0 22:09 pts/6    00:00:00 grep --color=auto www
```

æ³¨æ„: å‚è€ƒæ–‡ç« 1çš„`nohup`ç¤ºä¾‹ä¸­æ²¡æœ‰æ·»åŠ `&`ç¬¦å·, ä¼šå æ®ç»ˆç«¯. ä¸è¿‡ç»“æœæ˜¯ä¸€æ ·çš„, å…³é—­ç»ˆç«¯å¹¶ä¸ä¼šç»“æŸè¿›ç¨‹...

## setsid

### ä¿¡å· æ ‡å‡†è¾“å…¥ æ ‡å‡†è¾“å‡º

```console
$ setsid ping www.baidu.com
$ PING www.a.shifen.com (110.242.68.4) 56(84) bytes of data.
64 bytes from 110.242.68.4 (110.242.68.4): icmp_seq=1 ttl=128 time=50.0 ms
64 bytes from 110.242.68.4 (110.242.68.4): icmp_seq=2 ttl=128 time=47.0 ms
```

`setsid`æ‰§è¡Œä¸€ä¸ªå‘½ä»¤, ä¼šå°†å…¶ä¸æ‰€åœ¨ä¸­ç»ˆç«¯è§£ç»‘, ctrl-c æ— æ³•ç»ˆæ­¢è¯¥è¿›ç¨‹, è¯´æ˜ä¿¡å·æœºåˆ¶å·²è¢«é˜»æ–­, ä½†æ˜¯æ ‡å‡†è¾“å…¥, æ ‡å‡†è¾“å‡ºä»ç„¶å­˜åœ¨.

```console
64 bytes from 110.242.68.4 (110.242.68.4): icmp_seq=198 ttl=128 time=32.2 ms
64 bytes from 110.242.68.4 (110.242.68.4): icmp_seq=199 ttl=128 time=39.9 ms
64 bytes from 110.242.68.4 (110.242.68.4): icmp_seq=200 ttl=128 time=28.6 ms
ls          ## æ³¨æ„è¿™é‡Œæ˜¯å¯ä»¥è¾“å…¥å‘½ä»¤çš„ğŸ˜³
config.json  rootfs
$ 64 bytes from 110.242.68.4 (110.242.68.4): icmp_seq=201 ttl=128 time=31.5 ms
64 bytes from 110.242.68.4 (110.242.68.4): icmp_seq=202 ttl=128 time=23.9 ms
```

ä¸è¿‡é—®é¢˜ä¸å¤§, `setsid`çš„æ—¶å€™å°†æ ‡å‡†è¾“å‡ºé‡å®šå‘ä¸€ä¸‹å°±å¥½.

### 

åœ¨å¦ä¸€ç»ˆç«¯æŸ¥çœ‹æ­¤è¿›ç¨‹, å·²ç”±1å·è¿›ç¨‹æ¥ç®¡, è¯´æ˜å·²ä¸åŸç»ˆç«¯è„±ç¦»çˆ¶å­å…³ç³».

```console
$ ps -ef | grep ping
root      95913      1  0 22:17 ?        00:00:00 ping www.baidu.com
root      96544  95920  0 22:23 pts/5    00:00:00 grep --color=auto ping
```

å…³æ‰åŸç»ˆç«¯, æ­¤è¿›ç¨‹ä¾ç„¶å­˜åœ¨.
